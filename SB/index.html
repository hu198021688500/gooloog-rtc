<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<script src="/socket.io/socket.io.js"></script>
<script>
	// if (/Firefox\/\s/.test(navigator.userAgent)){
	//     var socket = io.connect('192.168.31.188:8083',{transports:['xhr-polling']}); 
	// } 
	// else if (/MSIE (\d+.\d+);/.test(navigator.userAgent)){
	//     var socket = io.connect('192.168.31.188:8083',{transports:['jsonp-polling']}); 
	// } 
	// else { 
	//     var socket = io.connect('192.168.31.188:8083'); 
	// }
	//var socket = io.connect('http://192.168.31.188:8083',{transports:[/*'xhr-polling','jsonp-polling',*/'websocket'/*,'flashsocket'*//*,'htmlfile'*/]});
	/*var socket = io.connect('http://192.168.31.188:8083', {
		transports : [ 'jsonp-polling' ]
	});

	socket.on('news', function(data) {
		console.log(data);
		socket.emit('my other event', {
			my : 'data'
		});
	});*/

	var socket = io.connect('http://192.168.31.188:8083');
	var fileReader;
	var name;
	function StartUpload() {
		if (document.getElementById('FileBox').value != "") {
			fileReader = new FileReader();
			name = document.getElementById('NameBox').value;
			var Content = "<span id='NameArea'>Uploading " + SelectedFile.name
					+ " as " + Name + "</span>";
			Content += '<div id="ProgressContainer"><div id="ProgressBar"></div></div><span id="percent">0%</span>';
			Content += "<span id='Uploaded'> - <span id='MB'>0</span>/"
					+ Math.round(SelectedFile.size / 1048576) + "MB</span>";
					
			document.getElementById('UploadArea').innerHTML = Content;
			
			fileReader.onload = function(evnt) {
				socket.emit('Upload', {
					'Name' : Name,
					Data : evnt.target.result
				});
			}
			socket.emit('Start', {
				'Name' : Name,
				'Size' : SelectedFile.size
			});
		} else {
			alert("Please Select A File");
		}
	}
	
	
	
	var iamgePath = "http://192.168.31.188:8083/image/";
	socket.on('Done', function(data) {
		var content = "Image Successfully Uploaded !!";
		content += "<img id='Thumb' src='" + path + data['iamge'] + "' alt='" + name + "'><br>";
		content += "<button  type='button' name='upload' value='' id='restart' class='button'>Upload Another</button>";
		document.getElementById("uploadArea").innerHTML = content;
		document.getElementById("restart").addEventListener("click", refresh);
	});
	function refresh() {
		location.reload(true);
	}
</script>